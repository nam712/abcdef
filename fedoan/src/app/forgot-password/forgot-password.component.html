<div class="forgot-password-container">
  <div class="forgot-password-content">
    
    <!-- Form nhập số điện thoại -->
    <div class="form-section" *ngIf="!showSuccessScreen">
      <div class="form-header">
        <a class="logo" routerLink="/">
          <span class="logo-text">FeDoan</span>
        </a>
        <h1 class="form-title">Quên mật khẩu</h1>
        <p class="form-subtitle">Nhập số điện thoại đã đăng ký để nhận mật khẩu mới</p>
      </div>

      <form class="forgot-password-form" [formGroup]="forgotPasswordForm" (ngSubmit)="onSubmit()">
        
        <div class="alert alert-danger" *ngIf="errorMessage">
          <i class="fas fa-exclamation-circle"></i>
          {{ errorMessage }}
        </div>

        <div class="form-group">
          <label for="phone">Số điện thoại *</label>
          <div class="input-with-icon">
            <i class="fas fa-phone"></i>
            <input 
              type="tel" 
              id="phone" 
              formControlName="phone"
              [class.error]="isFieldInvalid('phone')"
              placeholder="0987654321"
              autocomplete="tel"
              maxlength="10">
          </div>
          <div class="error-message" *ngIf="isFieldInvalid('phone')">
            {{ getFieldError('phone') }}
          </div>
          <div class="help-text">
            <i class="fas fa-info-circle"></i>
            Mật khẩu mới sẽ được gửi về số điện thoại này qua SMS
          </div>
        </div>

        <button type="submit" class="btn-primary" [disabled]="forgotPasswordForm.invalid || isLoading">
          @if (isLoading) {
            <i class="fas fa-spinner fa-spin"></i>
            <span>Đang xử lý...</span>
          } @else {
            <i class="fas fa-paper-plane"></i>
            <span>Gửi mật khẩu mới</span>
          }
        </button>

        <div class="form-footer">
          <a routerLink="/login" class="link">
            <i class="fas fa-arrow-left"></i>
            Quay lại đăng nhập
          </a>
        </div>
      </form>
    </div>

    <!-- Màn hình thành công -->
    <div class="success-section" *ngIf="showSuccessScreen">
      <div class="success-content">
        <div class="success-icon">
          <i class="fas fa-check-circle"></i>
        </div>
        <h1 class="success-title">Gửi mật khẩu thành công!</h1>
        <div class="success-message">
          <i class="fas fa-sms"></i>
          <p>Mật khẩu mới đã được gửi tới số điện thoại</p>
          <p class="phone-number">{{ maskedPhone }}</p>
        </div>
        
        <div class="success-instructions">
          <h3><i class="fas fa-lightbulb"></i> Hướng dẫn</h3>
          <ul>
            <li><i class="fas fa-check"></i> Kiểm tra tin nhắn SMS trên điện thoại của bạn</li>
            <li><i class="fas fa-check"></i> Sử dụng mật khẩu mới để đăng nhập</li>
            <li><i class="fas fa-check"></i> Đổi mật khẩu ngay sau khi đăng nhập để bảo mật</li>
            <li><i class="fas fa-check"></i> Không chia sẻ mật khẩu với bất kỳ ai</li>
          </ul>
        </div>

        <div class="success-actions">
          <button class="btn-primary" (click)="backToLogin()">
            <i class="fas fa-sign-in-alt"></i>
            Đăng nhập ngay
          </button>
          <p class="help-note">
            <i class="fas fa-question-circle"></i>
            Không nhận được SMS? Vui lòng kiểm tra lại số điện thoại hoặc 
            <a routerLink="/contact" class="link">liên hệ hỗ trợ</a>
          </p>
        </div>
      </div>
    </div>

    <!-- Thông tin bên phải -->
    <div class="info-section">
      <div class="info-content">
        <div class="info-icon">
          <i class="fas fa-shield-alt"></i>
        </div>
        <h2>Bảo mật thông tin</h2>
        <p>Mật khẩu mới sẽ được gửi trực tiếp tới số điện thoại đã đăng ký của bạn qua tin nhắn SMS.</p>
        
        <div class="info-features">
          <div class="feature">
            <i class="fas fa-lock"></i>
            <div>
              <h4>Mã hóa an toàn</h4>
              <p>Mật khẩu được mã hóa và bảo mật tuyệt đối</p>
            </div>
          </div>
          <div class="feature">
            <i class="fas fa-mobile-alt"></i>
            <div>
              <h4>SMS tức thì</h4>
              <p>Nhận mật khẩu ngay lập tức qua tin nhắn</p>
            </div>
          </div>
          <div class="feature">
            <i class="fas fa-user-shield"></i>
            <div>
              <h4>Xác thực chính chủ</h4>
              <p>Chỉ gửi về SĐT đã đăng ký</p>
            </div>
          </div>
        </div>

        <div class="security-tips">
          <h3><i class="fas fa-exclamation-triangle"></i> Lưu ý bảo mật</h3>
          <ul>
            <li>Không chia sẻ mật khẩu với bất kỳ ai</li>
            <li>Đổi mật khẩu ngay sau khi đăng nhập</li>
            <li>Sử dụng mật khẩu mạnh (8+ ký tự, có chữ và số)</li>
            <li>Không lưu mật khẩu trên thiết bị công cộng</li>
          </ul>
        </div>
      </div>
    </div>

  </div>
</div>
