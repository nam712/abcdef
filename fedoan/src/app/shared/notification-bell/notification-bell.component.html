<!-- Notification Bell -->
<div class="notification-wrapper">
  <button class="notification-btn" (click)="toggleNotifications(); $event.stopPropagation()" title="Thông báo">
    <i class="fas fa-bell"></i>
    <span class="notification-badge" *ngIf="unreadCount > 0">{{ unreadCount }}</span>
  </button>
  
  <!-- Notification Backdrop -->
  <div class="notification-backdrop" *ngIf="showNotifications" (click)="closeNotifications()"></div>
  
  <!-- Notification Dropdown -->
  <div class="notification-dropdown" *ngIf="showNotifications" (click)="$event.stopPropagation()">
    <div class="notification-header">
      <h4>Thông báo</h4>
      <div class="notification-actions">
        <button class="mark-all-read" (click)="markAllAsRead()" *ngIf="unreadCount > 0" title="Đánh dấu tất cả đã đọc">
          <i class="fas fa-check-double"></i>
        </button>
        <button class="clear-all" (click)="clearAll()" *ngIf="notifications.length > 0" title="Xóa tất cả">
          <i class="fas fa-trash-alt"></i>
        </button>
      </div>
    </div>
    <div class="notification-list">
      <div class="notification-item" 
           *ngFor="let notification of notifications" 
           [class.unread]="!notification.isRead"
           [class.clickable]="notification.route"
           (click)="onNotificationClick(notification)"
           [title]="notification.route ? 'Click để xem chi tiết' : ''">
        <div class="notification-icon" [class]="'notification-icon-' + notification.type">
          <i class="fas" 
             [class.fa-info-circle]="notification.type === 'info'"
             [class.fa-exclamation-triangle]="notification.type === 'warning'"
             [class.fa-check-circle]="notification.type === 'success'"
             [class.fa-times-circle]="notification.type === 'error'"></i>
        </div>
        <div class="notification-content">
          <p class="notification-message">{{ notification.message }}</p>
          <span class="notification-time">{{ notification.time }}</span>
          <span class="notification-link-hint" *ngIf="notification.route">
            <i class="fas fa-arrow-right"></i> Click để xem
          </span>
        </div>
      </div>
      <div class="empty-notifications" *ngIf="notifications.length === 0">
        <i class="fas fa-bell-slash"></i>
        <p>Không có thông báo</p>
      </div>
    </div>
  </div>
</div>
